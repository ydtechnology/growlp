@import "tailwindcss";

/* ========= Design Tokens (Light default) ========= */
:root {
  /* Base */
  --background: #ffffff;
  --foreground: #111827; /* text-gray-900 */

  /* Brand */
  --brand:     #6c5ce7;
  --brand-600: #5a49e1;
  --brand-700: #493bd2;

  /* Surfaces / Lines (LIGHT) */
  --panel: #ffffff;  /* header / side / right-panel */
  --card:  #ffffff;  /* cards */
  --muted: #f3f4f6;  /* hover / subtle bg */
  --line:  #e5e7eb;  /* borders */

  /* Text */
  --text:     #111827;
  --text-dim: #6b7280;

  /* Shape / Effects */
  --radius:    16px;
  --shadow-lg: 0 10px 30px rgba(0,0,0,.15);
  --shadow-md: 0 6px 18px rgba(0,0,0,.12);

  /* Layout */
  --header-h: 56px;
}

/* ---- Tailwind v4 theme mapping ---- */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --font-sans: var(--font-geist-sans), ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
  --font-mono: var(--font-geist-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono";

  --color-brand:     var(--brand);
  --color-brand-600: var(--brand-600);
  --color-brand-700: var(--brand-700);

  --color-panel:     var(--panel);
  --color-card:      var(--card);
  --color-muted:     var(--muted);
  --color-line:      var(--line);
  --color-text:      var(--text);
  --color-text-dim:  var(--text-dim);
}

/* ========= Dark theme (opt-in with .theme-dark) ========= */
.theme-dark {
  --background: #0a0a0a;
  --foreground: #ededed;

  --panel: #0f1013;
  --card:  #141519;
  --muted: #181a1f;
  --line:  #24262d;

  --text:     #e7e7ea;
  --text-dim: #a6a7ad;

  --shadow-lg: 0 10px 30px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.03) inset;
  --shadow-md: 0 6px 18px rgba(0,0,0,.28);
}

/* ========= Base ========= */
* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans, Arial, Helvetica, sans-serif);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========= Helpers ========= */
.u-card {
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow-md);
}
.u-shadow-brand { box-shadow: var(--shadow-lg); }
.u-round { border-radius: 9999px; border: 1px solid var(--line); background: var(--card); }
.u-border { border-color: var(--line) !important; }

:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand) 40%, transparent);
  border-radius: 10px;
}

/* scrollbars */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-track { background: color-mix(in srgb, var(--panel) 60%, transparent); }
*::-webkit-scrollbar-thumb { background: color-mix(in srgb, var(--line) 70%, transparent); border-radius: 999px; }
*::-webkit-scrollbar-thumb:hover { background: color-mix(in srgb, var(--line) 85%, transparent); }

img, svg, video, canvas, iframe { display: block; max-width: 100%; }

.h-tight { letter-spacing: -0.01em; }

/* ========= UI Polish: header / right-rail ========= */
.btn-device {
  border: 1px solid var(--line);
  background: var(--card);
  border-radius: 10px;
  padding: 6px 10px;
}
.btn-device[aria-pressed="true"] {
  border-color: color-mix(in srgb, var(--brand) 65%, var(--line));
  background: color-mix(in srgb, var(--brand) 12%, var(--card));
}

.right-rail .accordion-item {
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 12px;
}
.right-rail .accordion-trigger {
  padding: 10px 12px;
  font-weight: 600;
}

/* ========= shadcn/ui Dialog の前面化 ========= */
/* overlay（dialog以外の fixed） */
[data-radix-portal] .fixed[data-state="open"]:not([role="dialog"]) {
  z-index: 1000;
  background: rgba(0,0,0,.5);
}
/* dialog 本体 */
[data-radix-portal] [role="dialog"][data-state="open"] {
  z-index: 1010;
  background: var(--card);
}

/* モバイルSafari等で裏スクロール防止（dialog open中のbody） */
html:has([data-radix-portal] [role="dialog"][data-state="open"]) {
  overflow: hidden;
}